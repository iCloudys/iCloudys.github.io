<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[runtimeèƒ½åšäº›ä»€ä¹ˆ]]></title>
    <url>%2F2018%2Fruntime%E8%83%BD%E5%81%9A%E4%BA%9B%E4%BB%80%E4%B9%88%2F</url>
    <content type="text"><![CDATA[å‰è¨€é¢è¯•çš„æ—¶å€™é¢è¯•å®˜é—®ï¼šè®²è®²å¯¹runtimeçš„ç†è§£ï¼Œruntimeèƒ½åšäº›ä»€ä¹ˆ? æˆ‘åŸºæœ¬ä¸Šå°±æ˜¯å›žç­”åŠ¨æ€æ·»åŠ å±žæ€§ã€æ·»åŠ æ–¹æ³•ã€æ–¹æ³•çš„æ›¿æ¢â€¦â€¦ç­‰ç½‘ç»œç½—åˆ—çš„ä¸€å¤§å †ã€‚ä½†æ˜¯å…·ä½“æ€Žä¹ˆåšï¼Œè¿™ä¸ªå˜›ï¼Œæˆ‘ä¹Ÿè¯´ä¸å‡ºæ¥ã€‚åŸºäºŽæ­¤ï¼Œæˆ‘ç‰¹åœ°ç ”ç©¶äº†ä¸€ä¸‹runtime.hè¿™ä¸ªæ–‡ä»¶ï¼Œè¿‡æ»¤äº†ä¸€ä¸‹é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å¹¶ä¸”äº†è§£åŸºæœ¬åŠŸèƒ½å¹¶è®°å½•åœ¨æ­¤ã€‚ å‡†å¤‡è¿›å…¥åˆ°runtime.hæ–‡ä»¶é‡Œé¢ï¼Œå‘çŽ°é‡Œé¢æœ‰äº›æ–¹æ³•æ ‡è®°çš„æ˜¯OBJC_ARC_UNAVAILABLEï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªMRCé¡¹ç›®ï¼Œä»¥ä¾¿äºŽå°è¯•æ‰€æœ‰æ–¹æ³•ã€‚ åˆ›å»ºé¡¹ç›®è¿™é‡Œæˆ‘ä»¬åˆ›å»ºCommand Line Toolå·¥ç¨‹å³å¯ï¼Œå¦‚å›¾ä¸€: MRCé¡¹ç›®åˆ›å»ºå®ŒæˆåŽï¼Œé»˜è®¤æ˜¯ARCæ¨¡å¼çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¿®æ”¹ä¸ºMRCã€‚åœ¨TATGET-&gt; Build Settings-&gt;Objective-C Automatic Reference Counting-&gt;NO,é»˜è®¤ä¸ºYESè¡¨ç¤ºä½¿ç”¨ARCæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä¿®æ”¹ä¸ºNOå³å¯ã€‚ ç±»åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•ç±»ï¼Œåˆ›å»ºAnimalç±»ï¼Œæ·»åŠ ä¸€ä¸ªnameå±žæ€§å’Œä¸€ä¸ªspeakæ–¹æ³•,ä¸€èµ·çœ‹ä¸‹ç±»çš„æž„é€ : æ–¹æ³•ä»‹ç»å‡†å¤‡å¥½äº†ä¹‹åŽï¼Œæ¥åˆ°main.mæ–‡ä»¶,å¯¼å…¥objc/runtime.hå’ŒAnimal.hå¤´æ–‡ä»¶æ–‡ä»¶ã€‚ å®žä¾‹æ–¹æ³•object_copyåŽŸåž‹: 123OBJC_EXPORT id _Nullable object_copy(id _Nullable obj, size_t size)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0)OBJC_ARC_UNAVAILABLE; æè¿°:æ‹·è´å¯¹è±¡ç”¨çš„,å’Œcopyæ–¹æ³•ä¸€æ ·,è¿”å›žä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å‚æ•°:objè¢«æ‹·è´çš„å¯¹è±¡ï¼Œsizeå¯¹è±¡çš„å ç”¨å†…å­˜å¤§å°ï¼Œä»Žæºç å¯çŸ¥ï¼Œsizeæœ€å°ä¸º16ã€‚æ³¨æ„:è¿™ä¸ªæ–¹æ³•æ˜¯OBJC_ARC_UNAVAILABLEï¼Œåœ¨ARCä¸‹ä¸å¯ç”¨,è€Œä¸”å¦‚æžœå‚æ•°objä¸ºnil æˆ–è€…æ˜¯TaggedPointer,åˆ™ç›´æŽ¥è¿”å›žobj,å¹¶ä¸è¿›è¡Œæ‹·è´ã€‚ object_disposeåŽŸåž‹: 123OBJC_EXPORT id _Nullable object_dispose(id _Nullable obj)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0)OBJC_ARC_UNAVAILABLE; æè¿°:é”€æ¯å¯¹è±¡ï¼Œå¹¶ä¸”é‡Šæ”¾ç©ºé—´ã€‚å‚æ•°:objè¦é‡Šæ”¾çš„å¯¹è±¡ã€‚æ³¨æ„:åœ¨demoä¸­,è°ƒç”¨æ­¤æ–¹æ³•åŽï¼Œå¯¹è±¡è¿˜æ˜¯èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæ²¡æœ‰æŸ¥æ‰¾åˆ°åŽŸå› ï¼Œæ”¹å¤©ç ”ç©¶ä¸‹å•åˆ—ä¸€ç¯‡æ–‡ç« ã€‚æºç : 1234567id object_dispose(id obj)&#123; if (!obj) return nil; objc_destructInstance(obj); free(obj); return nil;&#125; ä»Žæºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆåˆ¤æ–­objæ˜¯å¦ä¸ºç©ºï¼Œå¦åˆ™è°ƒç”¨objc_destructInstanceé”€æ¯å¯¹è±¡,ç„¶åŽè°ƒç”¨free()é‡Šæ”¾ç©ºé—´ã€‚ object_getClassåŽŸåž‹: 123OBJC_EXPORT Class _Nullableobject_getClass(id _Nullable obj) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°:èŽ·å–å¯¹è±¡çš„Classï¼Œå’Œå¯¹è±¡ç›´æŽ¥è°ƒç”¨classæ–¹æ³•åŸºæœ¬ä¸€è‡´,å†…éƒ¨å®žçŽ°æ˜¯è¿”å›žobjçš„isaæŒ‡é’ˆï¼Œå¯¹äºŽisaæŒ‡é’ˆè¿™é‡Œä¸èµ˜è¿°ã€‚æ³¨æ„:å¦‚æžœobjä¼ nil,åˆ™è¿”å›žå€¼ä¸ºNil object_setClassåŽŸåž‹: 123OBJC_EXPORT Class _Nullableobject_setClass(id _Nullable obj, Class _Nonnull cls) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°: ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç±»,ç›®çš„æ˜¯ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„isaæŒ‡é’ˆ,è¿”å›žå€¼æ˜¯æ—§çš„classã€‚æ³¨æ„:è°ƒç”¨æ­¤æ–¹æ³•ä¹‹åŽï¼Œå¯¹è±¡çš„ç±»åž‹å°±ä¼šæ”¹å˜ï¼Œæ‰€ä»¥åœ¨å¼€å‘ä¸­åº”è¯¥è°¨æ…Žä½¿ç”¨æ­¤æ–¹æ³•ã€‚ç”±ä¸‹å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè°ƒç”¨object_setClassæ–¹æ³•åŽï¼Œa1ç”±åŽŸæ¥çš„Animal å˜æˆNSObjectå¯¹è±¡ï¼Œç„¶åŽåœ¨å‘aå‘é€æ¶ˆæ¯ç«‹å³å´©æºƒã€‚å´©æºƒä¿¡æ¯æç¤ºNSObjectä¸å­˜åœ¨setNameæ–¹æ³•ã€‚ object_isClassåŽŸåž‹: 123OBJC_EXPORT BOOLobject_isClass(id _Nullable obj) OBJC_AVAILABLE(10.10, 8.0, 9.0, 1.0, 2.0); æè¿°:åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç±»å¯¹è±¡ï¼Œæ³¨æ„:ç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…·ä½“ä¸ºä»€ä¹ˆï¼Œè¿™é‡Œä¸ä¼šèµ˜è¿°ã€‚ç”±ä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼Œa1ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥ä»–ä¸æ˜¯ç±»å¯¹è±¡ï¼ŒAnimalæ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥è¿”å›žTRUEã€‚ object_getIvaråŽŸåž‹: 123OBJC_EXPORT id _Nullableobject_getIvar(id _Nullable obj, Ivar _Nonnull ivar) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°: èŽ·å–objçš„ivarçš„å€¼ã€‚å’Œè¿™ä¸ªæ–¹æ³•åŠŸèƒ½ç±»ä¼¼çš„è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•object_setInstanceVariable,ä½†æ˜¯è¿™ä¸ªèŽ·å–çš„ç»“æžœé€Ÿåº¦å›žæ›´å¿«ä¸€äº›ï¼Œä»Žobject_setInstanceVariableæºç ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼Œæœ€ç»ˆä¹Ÿæ˜¯è°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•ã€‚ä¸ºäº†æµ‹è¯•æ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸ºAnimalç±»æ·»åŠ ä¸€ä¸ªå˜é‡ageã€‚ç”±ä¸‹å›¾ä¹Ÿå¯ä»¥çœ‹å‡ºå±žæ€§å’Œå˜é‡çš„åŒºåˆ«ã€‚ object_getInstanceVariableåŽŸåž‹: 12345OBJC_EXPORT Ivar _Nullableobject_getInstanceVariable(id _Nullable obj, const char * _Nonnull name, void * _Nullable * _Nullable outValue)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0)OBJC_ARC_UNAVAILABLE; æè¿°:è¿™ä¸ªæ–¹æ³•å’Œä¸Šä¸ªæ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯èŽ·å–å±žæ€§æˆ–è€…å˜é‡çš„å€¼ï¼Œåªä¸è¿‡å‚æ•°å’Œè¿”å›žå€¼ä¸åŒã€‚å‚æ•°:objè¢«èŽ·å–çš„å¯¹è±¡;nameå˜é‡çš„åç§°,å­—ç¬¦ä¸²æ ¼å¼;outValueè¿™ä¸ªå˜é‡çš„å€¼ã€‚é€šè¿‡æºç å¯ä»¥çœ‹å‡ºè¿™ä¸ªæ–¹æ³•çš„å®žçŽ°è¿‡ç¨‹å°±æ˜¯é€šè¿‡nameèŽ·å–Ivar,ç„¶åŽè°ƒç”¨ä¸Šè¿°æ–¹æ³•ã€‚æ‰€ä»¥å®˜æ–¹æ³¨é‡Šä¸Šè¯´æ­¤æ–¹æ³•æ…¢ä¸Žä¸Šè¿°æ–¹æ³•ã€‚è¿™é‡Œå°±ä¸ä¸Šå›¾äº†ï¼Œå›¾å’ŒðŸ‘†çš„ä¸€æ ·ã€‚ object_setIvarobject_setIvarWithStrongDefaultåŽŸåž‹: 123OBJC_EXPORT voidobject_setIvar(id _Nullable obj, Ivar _Nonnull ivar, id _Nullable value) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); 1234OBJC_EXPORT voidobject_setIvarWithStrongDefault(id _Nullable obj, Ivar _Nonnull ivar, id _Nullable value) OBJC_AVAILABLE(10.12, 10.0, 10.0, 3.0, 2.0); æè¿°:å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•åŸºæœ¬ç›¸åŒ,æ‰€ä»¥è¿™é‡Œæ”¾åœ¨ä¸€å—è¯´äº†ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ç»™å˜é‡èµ‹å€¼ï¼Œç›¸å½“äºŽa1.name=æˆ‘æ˜¯å°ç‹—ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«åœ¨äºŽç¬¬ä¸€ä¸ªä¼šç»™å±žæ€§ç”¨Unretainedä¿®é¥°ï¼Œç¬¬äºŒä¸ªä¼šç”¨Strongä¿®é¥°ï¼Œæ³¨æ„è¿™ä¸ªå‰ææ˜¯è¿™ä¸ªå±žæ€§æ²¡æœ‰è¢«ä¿®é¥°çš„æƒ…å†µä¸‹æ‰ä¼šèµ·ä½œç”¨ã€‚æ¯”å¦‚nameå·²ç»è¢«copyä¿®é¥°äº†ï¼Œé‚£å°±ä¿æŒåŽŸæ¥çš„æ ·å­ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚å‚æ•°:objè¢«èµ‹å€¼çš„å¯¹è±¡;Ivarå³å°†èµ‹å€¼çš„å˜é‡,valueè¢«èµ‹çš„å€¼ã€‚æ³¨æ„:å¦‚æžœå¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±žæ€§ï¼Œæ˜¯ä¸èƒ½èµ‹å€¼çš„ã€‚ object_setInstanceVariableobject_setInstanceVariableWithStrongDefaultåŽŸåž‹: 12345OBJC_EXPORT Ivar _Nullableobject_setInstanceVariable(id _Nullable obj, const char * _Nonnull name, void * _Nullable value)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0)OBJC_ARC_UNAVAILABLE; 123456OBJC_EXPORT Ivar _Nullableobject_setInstanceVariableWithStrongDefault(id _Nullable obj, const char * _Nonnull name, void * _Nullable value)OBJC_AVAILABLE(10.12, 10.0, 10.0, 3.0, 2.0)OBJC_ARC_UNAVAILABLE; æè¿°:è¿™ä¸¤ä¸ªæ–¹æ³•å’Œä¸Šé¢ä¸¤ä¸ªæ–¹æ³•åŸºæœ¬ç›¸åŒ,åªæ˜¯å‚æ•°å’Œè¿”å›žå€¼ä¸åŒï¼Œä»Žæºç å¯ä»¥çœ‹å‡ºå†…éƒ¨è°ƒç”¨çš„ä¹Ÿæ˜¯ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•è€Œå·²ã€‚ç›´æŽ¥æ¼”ç¤ºä½¿ç”¨æ–¹æ³•ï¼š èŽ·å¾—ç±»å®šä¹‰objc_getClassobjc_lookUpClassåŽŸåž‹: 123OBJC_EXPORT Class _Nullableobjc_getClass(const char * _Nonnull name)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); 123OBJC_EXPORT Class _Nullableobjc_lookUpClass(const char * _Nonnull name)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); æè¿°:ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯é€šè¿‡å­—ç¬¦ä¸²èŽ·å–ä¸€ä¸ªClass,å¹¶ä¸”æ•´ä¸ªç±»æ˜¯åœ¨å·¥ç¨‹é‡Œé¢å­˜åœ¨çš„ï¼Œå¦åˆ™ä¼šè¿”å›žnilã€‚æ³¨é‡Šä¸Šè¯´objc_getClassæ–¹æ³•ä¼šåœ¨ç¬¬ä¸€æ¬¡æ²¡æœ‰æ‰¾åˆ°Classçš„æƒ…å†µä¸‹ä¼šå†æ¬¡æŸ¥è¯¢ä¸€å˜å¹¶ä¸”æ‰§è¡Œå›žè°ƒã€‚ä»Žæºç ä¸Šé¢çœ‹ç€ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯æ‰§è¡Œäº†look_up_class(const char *aClassName, bool includeUnconnected, bool includeClassHandler)è¿™ä¸ªæ–¹æ³•ã€‚åŒºåˆ«åœ¨äºŽincludeClassHandlerè¿™ä¸ªå‚æ•°ã€‚objc_getClassä¼ çš„æ˜¯YESï¼Œè€ŒåŽè€…æ˜¯NOã€‚åœ¨look_up_classå®žçŽ°ä¸Šçœ‹ï¼Œæ—§ç‰ˆæœ¬çš„å®žçŽ°æ˜¯æŒ‰ç…§æ³¨é‡Šä¸Šæ‰€è¯´çš„ä¸€æ ·ã€‚ä½†æ˜¯æ–°ç‰ˆæœ¬çš„è¿™ä¸ªå‚æ•°è¢«æ ‡è®°ä¸ºunused,åŸºæœ¬ä¸ŠçŽ°åœ¨ä¸¤ä¸ªæ–¹æ³•ç›¸åŒã€‚ objc_getRequiredClassåŽŸåž‹: 123OBJC_EXPORT Class _Nonnullobjc_getRequiredClass(const char * _Nonnull name)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); æè¿°:è¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢çš„objc_getClassæ–¹æ³•åŸºæœ¬ä¸€è‡´ï¼Œå†…éƒ¨è°ƒç”¨çš„å°±æ˜¯objc_getClassè¿™ä¸ªæ–¹æ³•ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰æ‰¾åˆ°æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œä¼šæŠ¥é“¾æŽ¥å¤±è´¥ã€‚è´´ä¸‹æºç : 123456Class objc_getRequiredClass(const char *aClassName)&#123; Class cls = objc_getClass(aClassName); if (!cls) _objc_fatal(&quot;link error: class &apos;%s&apos; not found.&quot;, aClassName); return cls;&#125; objc_getMetaClassåŽŸåž‹: 123OBJC_EXPORT Class _Nonnullobjc_getMetaClass(const char * _Nonnull name)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); æè¿°:èŽ·å–ç±»çš„å…ƒç±»,è¿™ä¸ªæ–¹æ³•å’Œobjc_getRequiredClassåŸºæœ¬ç±»ä¼¼ï¼Œä¹Ÿæ˜¯è°ƒç”¨äº†objc_getClassè¿™ä¸ªæ–¹æ³•ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰æ‰¾åˆ°Classçš„æ—¶å€™ä¼šæŠ¥æç¤ºä¿¡æ¯ï¼Œä¸ä¼šCrash,ç„¶åŽä¼šè¿”å›žNil,æœ€ç»ˆè¿”å›žClassçš„isaæŒ‡é’ˆã€‚ä»Žå›¾ä¸­çœ‹åˆ°æŽ§åˆ¶å°é‡Œé¢æ‰“å°ä¿¡æ¯ã€‚è´´ä¸‹æºç : 123456789101112131415Class objc_getMetaClass(const char *aClassName)&#123; Class cls; if (!aClassName) return Nil; cls = objc_getClass (aClassName); if (!cls) &#123; _objc_inform (&quot;class `%s&apos; not linked into application&quot;, aClassName); return Nil; &#125; return cls-&gt;ISA();&#125; objc_getClassListåŽŸåž‹: 123OBJC_EXPORT int objc_getClassList(Class _Nonnull * _Nullable buffer, int bufferCount)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); æè¿°:èŽ·å–æŒ‡å®šçš„ä¸ªæ•°ç±»åˆ—è¡¨ã€‚bufferéœ€è¦ä¼ å…¥ä¸€ä¸ªClassæ•°ç»„ï¼ŒbufferCountéœ€è¦ä¼ å…¥æƒ³è¦çš„ä¸ªæ•°,è¿”å›žå€¼æ˜¯ç±»çš„æ€»æ•°ã€‚å¦‚æžœbufferCountä¼ å…¥çš„æ•°æ¯”ç±»çš„æ€»æ•°å¤§ï¼Œåˆ™æœ€å¤šèƒ½è¿”å›žæ‰€æœ‰çš„ç±»ã€‚å¦‚æžœbufferCountæ¯”ç±»çš„æ€»æ•°å°ï¼Œåˆ™ä¼šè¿”å›žè¿™ä¸ªä¸ªæ•°çš„ç±»ï¼Œä»Žä¸‹å›¾ä¸­å¯ä»¥çœ‹åˆ°å·²ç»æœ‰13062ä¸ªç±»äº†ã€‚æ³¨æ„:èŽ·å–çš„ç±»æœ‰å¯èƒ½ä¸æ˜¯NSObjectçš„å­ç±»ï¼Œæ‰€ä»¥è¦å°å¿ƒè°ƒç”¨è¿™äº›ç±»çš„æ–¹æ³•.å›¾ä¸­å®žä¾‹èŽ·å–10ä¸ªç±»: objc_copyClassListåŽŸåž‹: 123OBJC_EXPORT Class _Nonnull * _Nullableobjc_copyClassList(unsigned int * _Nullable outCount)OBJC_AVAILABLE(10.7, 3.1, 9.0, 1.0, 2.0); æè¿°:è¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢çš„æ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™ä¸ªæ˜¯ä¸€æ¬¡æ€§èŽ·å–æ‰€æœ‰çš„ç±»ï¼ŒoutCountå‘å¤–è¾“å‡ºç±»çš„æ€»ä¸ªæ•°ã€‚æ³¨æ„:è¿™ä¸ªæ–¹æ³•è¿”å›žå€¼æ˜¯ClassæŒ‡é’ˆï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å®ŒæˆåŽéœ€è¦è°ƒç”¨free()è¿›è¡Œé‡Šæ”¾ã€‚ ç±»æ–¹æ³•class_getNameåŽŸåž‹: 123OBJC_EXPORT const char * _Nonnullclass_getName(Class _Nullable cls) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°: èŽ·å–Classçš„åå­—ï¼Œè¿”å›žå€¼ç±»åž‹æ˜¯const char *ã€‚è¿™ä¸ªåœ¨ç®€å•ä¸è¿‡ï¼Œä¸Šå›¾å·²ç»æ¼”ç¤ºäº†ã€‚ä¸åœ¨èµ˜è¿°ã€‚ class_isMetaClassåŽŸåž‹: 123OBJC_EXPORT BOOLclass_isMetaClass(Class _Nullable cls) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°:åˆ¤æ–­ä¸€ä¸ªClassæ˜¯å¦æ˜¯å…ƒç±»ï¼Œè¿”å›žå€¼æ˜¯boolç±»åž‹ã€‚ class_getSuperclassåŽŸåž‹: 123OBJC_EXPORT Class _Nullableclass_getSuperclass(Class _Nullable cls) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°:èŽ·å–Classçš„çˆ¶ç±»ã€‚ å’ŒOCçš„superclassåŠŸèƒ½ä¸€æ ·ã€‚ä»Žä¸‹å›¾å¯ä»¥çœ‹å‡ºAnimalçš„çˆ¶ç±»æ˜¯NSObjectã€‚ class_setSuperclassåŽŸåž‹: 1234567OBJC_EXPORT Class _Nonnullclass_setSuperclass(Class _Nonnull cls, Class _Nonnull newSuper) __OSX_DEPRECATED(10.5, 10.5, &quot;not recommended&quot;) __IOS_DEPRECATED(2.0, 2.0, &quot;not recommended&quot;) __TVOS_DEPRECATED(9.0, 9.0, &quot;not recommended&quot;) __WATCHOS_DEPRECATED(1.0, 1.0, &quot;not recommended&quot;)__BRIDGEOS_DEPRECATED(2.0, 2.0, &quot;not recommended&quot;); æè¿°:æ”¹å˜æŸä¸ªClassçš„çˆ¶ç±»ã€‚ä¸€å®šè¦è°¨æ…Žä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚è¢«æ ‡è®°ä¸ºnot recommendedã€‚è¿”å›žå€¼æ˜¯å°±çš„çˆ¶ç±»ã€‚çœ‹ä¸‹å›¾ï¼Œå½“æŠŠAnimalçš„çˆ¶ç±»æ”¹æˆNSStringä¹‹åŽï¼ŒæŠŠa1å½“åšå­—ç¬¦ä¸²æ“ä½œï¼Œè¿è¡Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯å½“è°ƒç”¨AnimalåŽŸæ¥çš„æ–¹æ³•ä¹‹åŽï¼Œå°±ä¼šæŠ¥æ–¹æ³•æ‰¾ä¸åˆ°ã€‚ class_getVersionclass_setVersion123OBJC_EXPORT intclass_getVersion(Class _Nullable cls)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); 123OBJC_EXPORT voidclass_setVersion(Class _Nullable cls, int version)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); æè¿°:è¿™ä¸¤ä¸ªæ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå°±æ”¾ä¸€å—è¯´äº†ï¼Œå…¶å®žå°±æ˜¯è®¾ç½®å’ŒèŽ·å–Classçš„ç‰ˆæœ¬ã€‚ ç›´æŽ¥ä¸Šå›¾: class_getInstanceSizeåŽŸåž‹: 123OBJC_EXPORT size_tclass_getInstanceSize(Class _Nullable cls) OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0); æè¿°:èŽ·å–è¿™ä¸ªç±»æ‰€å ç”¨å­—èŠ‚æ•°ã€‚ä¸è¯¦ç»†è®²äº†ï¼Œç½‘ä¸Šéƒ½æ˜¯è®²è§£ã€‚ class_getInstanceVariableclass_getClassVariableclass_copyIvarListclass_getInstanceMethodclass_getClassMethodclass_getMethodImplementationclass_getMethodImplementation_stretclass_respondsToSelectorclass_copyMethodListclass_conformsToProtocolclass_copyProtocolListclass_getPropertyclass_copyPropertyListclass_getIvarLayoutclass_getWeakIvarLayoutclass_addMethodclass_replaceMethodclass_addIvarclass_addProtocolclass_addPropertyclass_replacePropertyclass_setIvarLayoutclass_setWeakIvarLayoutobjc_getFutureClasså®žä¾‹åŒ–ç±»class_createInstanceobjc_constructInstanceobjc_destructInstanceæ·»åŠ ç±»objc_allocateClassPairobjc_registerClassPairobjc_duplicateClassobjc_disposeClassPairæ–¹æ³•method_getNamemethod_getImplementationmethod_getTypeEncodingmethod_getNumberOfArgumentsmethod_copyReturnTypemethod_copyArgumentTypemethod_getReturnTypemethod_getArgumentTypemethod_getDescriptionmethod_setImplementationmethod_exchangeImplementationså®žä¾‹å˜é‡ivar_getNameivar_getTypeEncodingivar_getOffsetå±žæ€§property_getNameproperty_getAttributesproperty_copyAttributeListproperty_copyAttributeValueåè®®objc_getProtocolobjc_copyProtocolListprotocol_conformsToProtocolprotocol_isEqualprotocol_getNameprotocol_getMethodDescriptionprotocol_copyMethodDescriptionListprotocol_getPropertyprotocol_copyPropertyListprotocol_copyPropertyList2protocol_copyProtocolListobjc_allocateProtocolobjc_registerProtocolprotocol_addMethodDescriptionprotocol_addProtocolprotocol_addPropertyåº“objc_copyImageNamesclass_getImageNameobjc_copyClassNamesForImageé€‰æ‹©å™¨sel_getNamesel_registerNamesel_isEqualobjc_enumerationMutationobjc_setEnumerationMutationHandlerobjc_setForwardHandlerimp_implementationWithBlockimp_getBlockimp_removeBlockobjc_loadWeakobjc_storeWeakæ·»åŠ å˜é‡objc_setAssociatedObjectobjc_getAssociatedObjectobjc_removeAssociatedObjects]]></content>
  </entry>
  <entry>
    <title><![CDATA[.netæ­å»ºWebSocket]]></title>
    <url>%2F2018%2Fnet%E6%90%AD%E5%BB%BAWebSocket%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[KSThumbImage(ä¸€)]]></title>
    <url>%2F2018%2FKSThumbImage%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬ä¸ç ”ç©¶SDWebImageçš„æºç ï¼Œè‡ªå·±æ¥å†™ä¸€ä¸ªçš„èŽ·å–è§†é¢‘ç¼©ç•¥å›¾çš„ç½‘ç»œæ¡†æž¶ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[ç”¨Objective-Cå†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2017%2F%E7%94%A8Objective-C%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä¸Šæ¬¡å†™è¿‡çˆ¬è™«çš„åˆç¯‡ï¼Œæˆ‘ä»¬å·²ç»èƒ½çˆ¬åˆ°åŸºæœ¬çš„æ•°æ®äº†ã€‚ä½†æ˜¯ä¸€å¼ ç½‘é¡µçš„æ•°æ®æ˜¯æœ‰é™çš„ï¼Œä»Žæˆ‘ä»¬ä¸Šæ¬¡çš„ç¨‹åºæ¥çœ‹ï¼Œèƒ½æŠ“åˆ°çš„å›¾ç‰‡æ‰ä¸è¿‡åæ¥å¼ ã€‚å¾ˆæ˜¾ç„¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­å®Œå–„æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚å§ã€‚ å¿…å¤‡å·¥å…· è”æŽ¥ç½‘ç»œçš„Mac, æµè§ˆå™¨ï¼ŒæŽ¨èç”¨Google Chrome, Xcodeå¼€å‘å·¥å…·, ç”¨Objective-Cå†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«(ä¸€) çš„æºç  å¿…å¤‡æŠ€èƒ½å»ºè®®çœ‹å®Œ ç”¨Objective-Cå†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«(ä¸€) ,æ˜Žç™½ä¸€äº›ç®€å•çš„çŸ¥è¯†,è™½ç„¶æˆ‘å†™çš„å¾ˆçƒ‚,ä½†ä¹Ÿä¸è‡³äºŽçœ‹è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ä¸€å¤´é›¾æ°´ã€‚ æœ¬ç¯‡ç›®æ ‡æ·±åº¦æŠ“å–æ›´å¤šçš„æ•°æ®å¦‚å›¾: åˆ†æžåœ¨ä¸Šç¯‡ä¸­ï¼Œæˆ‘ä»¬ç»™å®šä¸€ä¸ªurlæŠ“å–å®Œå›¾ç‰‡ä¹‹åŽç›´æŽ¥å°±ç»“æŸäº†ï¼Œé‚£ä¹ˆå¦‚ä½•ä¸è®©ç¨‹åºç»“æŸï¼Œè€Œç»§ç»­æŠ“å–åˆ«çš„urå‘¢ï¼Ÿæ€»ä¸èƒ½ç»™SpiderOptionå®šä¹‰ä¸€ä¸ªurlæ•°ç»„,ç¨‹åºçš„è¾“å…¥æ˜¯æœ‰é™çš„,è¿™ç§åŠžæ³•è§£å†³ä¸äº†é—®é¢˜ã€‚èªæ˜Žçš„ä½ ä¸€å®šæƒ³åˆ°äº†ï¼Œåœ¨çˆ¬è™«çˆ¬å–å›¾ç‰‡çš„æ—¶å€™ï¼Œä¸ä¹Ÿæ˜¯å¯ä»¥çˆ¬åˆ°è¿™ä¸ªé¡µé¢çš„è·³è½¬é¡µé¢ä¹ˆï¼Œå¦‚æžœæˆ‘ä»¬åœ¨æŠŠè·³è½¬é¡µé¢çš„å›¾ç‰‡çˆ¬ä¸‹æ¥ï¼Œç”šè‡³æŠŠè·³è½¬é¡µé¢é‡Œé¢çš„è·³è½¬é¡µé¢çˆ¬ä¸‹æ¥ï¼Œè¿™æ ·ä¸€ç›´å¾€æ·±å±‚æ¬¡çš„æŠ“å–æ•°æ®ï¼Œå°±ä¸æ˜¯æºæºä¸æ–­çš„å›¾ç‰‡çˆ¬åˆ°æ‰‹äº†ä¹ˆï¼ŸðŸ˜Žä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹å§ï¼ï¼ï¼ ç¼–ç å‡†å¤‡é¦–å…ˆæˆ‘ä»¬æ”¹é€ ä¸€ä¸‹Spiderç±»ï¼Œç»™Spideræ·»åŠ å‡ ä¸ªå˜é‡:1ã€_finashUrl ç”¨æ¥å­˜æ”¾å·²ç»çˆ¬å–è¿‡çš„url,é˜²æ­¢é‡å¤æŠ“å–,å¯¼è‡´é‡å¤å¾ªçŽ¯ã€‚2ã€_session ç”¨æ¥è¿›è¡ŒèŽ·å–htmlçš„ç½‘ç»œè¯·æ±‚;åœ¨ç¬¬ä¸€ç¯‡ä¸­æˆ‘ä»¬ç›´æŽ¥åœ¨æ–¹æ³•é‡Œé¢å®šä¹‰äº†ç›¸åŒçš„å˜é‡,è¿™é‡Œæˆ‘ä»¬æŠŠå®ƒå£°æ˜Žæˆå˜é‡,é˜²æ­¢é‡å¤åˆ›å»ºå¯¹è±¡.3ã€_urlExpression ç”¨æ¥åŒ¹é…urlçš„æ­£åˆ™è¡¨è¾¾å¼.4ã€_imgExpression ç”¨æ¥åŒ¹é…imgçš„æ­£åˆ™è¡¨è¾¾å¼.5ã€fetchHtmlQueue æ­£åˆ™åŒ¹é…çš„é˜Ÿåˆ—.6ã€operationQueue ç½‘ç»œè¯·æ±‚çš„é˜Ÿåˆ—. å®šä¹‰ä¸Šé¢å˜é‡ä¹‹åŽå¹¶ä¸”åœ¨initæ–¹æ³•ä¸­åˆå§‹åŒ–ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748@interface Spider()&lt;NSURLSessionDataDelegate&gt;@property (nonatomic, strong) NSOperationQueue* fetchHtmlQueue;@property (nonatomic, strong) NSOperationQueue* operationQueue;@end@implementation Spider&#123; //å·²ç»æŠ“å–çš„url NSMutableSet&lt;NSString*&gt;* _finashUrl; NSRegularExpression* _urlExpression; NSRegularExpression* _imgExpression; NSURLSession* _session;&#125;- (instancetype)initWithOption:(SpiderOption *)option&#123; self = [super init]; if (self) &#123; _option = option; _finashUrl = [NSMutableSet set]; _imgExpression = [NSRegularExpression regularExpressionWithPattern:option.pattern options:NSRegularExpressionCaseInsensitive error:nil]; _urlExpression = [NSRegularExpression regularExpressionWithPattern:@"https?:.+?.html" options:NSRegularExpressionCaseInsensitive error:nil]; _operationQueue = [[NSOperationQueue alloc] init]; _operationQueue.maxConcurrentOperationCount = 3; _operationQueue.name = @"com.html.loadQueue"; _fetchHtmlQueue = [[NSOperationQueue alloc] init]; _fetchHtmlQueue.maxConcurrentOperationCount = 3; _fetchHtmlQueue.name = @"com.html.fetchQueue"; NSURLSessionConfiguration* configuration = [NSURLSessionConfiguration defaultSessionConfiguration]; configuration.timeoutIntervalForRequest = 30; _session = [NSURLSession sessionWithConfiguration:configuration delegate:self delegateQueue:_fetchHtmlQueue]; &#125; return self;&#125; æ”¹å†™æ–¹æ³•ç”±äºŽæˆ‘ä»¬ç”¨äº†å¤šçº¿ç¨‹çš„æŠ€æœ¯ï¼Œæ¯æ¬¡åŠ è½½ä¸€ä¸ªurléƒ½è¦æ”¾åˆ°é˜Ÿåˆ—åŽ»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹loadUrlæ–¹æ³•: 12345678910111213141516- (void)loadUrl:(NSURL*)url&#123; WeakSelf; @synchronized(self)&#123; [self-&gt;_operationQueue addOperationWithBlock:^&#123; StrongSelf; NSURLSessionDataTask* task = [sSelf-&gt;_session dataTaskWithURL:url]; [task resume]; &#125;]; &#125;&#125; ä¸Šä¸€æ­¥è¯·æ±‚æˆåŠŸä¹‹åŽï¼Œä¼šè°ƒç”¨sessionçš„ä»£ç†æ–¹æ³•ï¼Œæ‰€æœ‰æˆ‘ä»¬éœ€è¦å®žçŽ°sessionçš„ä»£ç†æ–¹æ³•: 1234567891011121314151617181920212223242526272829303132///MARK:- NSURLSessionDataDelegate- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTaskdidReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler&#123; NSURLSessionResponseDisposition disposition = NSURLSessionResponseCancel; NSInteger statusCode = 0; if ([response respondsToSelector:@selector(statusCode)])&#123; statusCode = [((NSHTTPURLResponse*)response) statusCode]; &#125; if (statusCode == 200) &#123; disposition = NSURLSessionResponseAllow; &#125; completionHandler(disposition);&#125;- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; NSString* html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; if (html &amp;&amp; html.length &gt; 0) &#123; [self fetchUrlWithHtml:html]; [self fetchImgWithHtml:html]; &#125;&#125; æˆ‘ä»¬åœ¨ä¿®æ”¹ä¸€ä¸‹fetchImgWithHtmlæ–¹æ³•,åŒ¹é…imgä¹Ÿè¦æ”¾åˆ°é˜Ÿåˆ—é‡Œ,åŒ¹é…æˆåŠŸåŽå›žè°ƒå³å¯: 12345678910- (void)fetchImgWithHtml:(NSString*)html&#123; WeakSelf; [self.fetchHtmlQueue addOperationWithBlock:^&#123; StrongSelf; NSArray&lt;NSString*&gt;* strings = [sSelf fetchStringsWithHtml:html expression:sSelf-&gt;_imgExpression]; sSelf.option.complete ? sSelf.option.complete(strings) : nil; &#125;];&#125; åŒç†æˆ‘ä»¬ä¿®æ”¹fetchUrlWithHtmlæ–¹æ³•,å¹¶ä¸”æŠŠéœ€è¦è¯·æ±‚çš„urlæ”¾åˆ°_finashUrlé‡Œé¢,åœ¨è¯·æ±‚ä¹‹å‰åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦è¯·æ±‚è¿‡å³å¯: 123456789101112131415161718- (void)fetchUrlWithHtml:(NSString*)html&#123; WeakSelf; [self.fetchHtmlQueue addOperationWithBlock:^&#123; StrongSelf; NSArray&lt;NSString*&gt;* strings = [sSelf fetchStringsWithHtml:html expression:sSelf-&gt;_urlExpression]; for (NSString* string in strings) &#123; NSURL* url = [NSURL URLWithString:string]; if ([sSelf-&gt;_finashUrl containsObject:string]) &#123; continue; &#125; [sSelf-&gt;_finashUrl addObject:string]; [sSelf loadUrl:url]; &#125; &#125;];&#125; æœ€åŽé™„ä¸ŠfetchStringsWithHtmlæ–¹æ³•: 12345678910111213141516- (NSArray&lt;NSString*&gt;*)fetchStringsWithHtml:(NSString*)html expression:(NSRegularExpression*)expression&#123; NSArray&lt;NSTextCheckingResult*&gt;* results = [expression matchesInString:html options:NSMatchingReportCompletion range:NSMakeRange(0, html.length)]; NSMutableArray&lt;NSString*&gt;* strings = [NSMutableArray arrayWithCapacity:results.count]; for (NSTextCheckingResult* result in results) &#123; NSString* sub = [html substringWithRange:result.range]; [strings addObject:sub]; &#125; return strings;&#125; è¿è¡ŒæŽ¥ä¸‹æ¥è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ç¨‹åºä¸åœçš„æŠ“å–å›¾ç‰‡ï¼Œè¶Šæ¥è¶Šå¤šã€‚ å¯è§†åŒ–ä¸ºäº†æ›´å¥½çš„æµè§ˆæˆ‘ä»¬èŽ·å–çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æŽ§åˆ¶å™¨é‡Œé¢ç”¨UICollectionViewå±•çŽ°å‡ºæ¥ï¼Œç›´æŽ¥ä¸Šä»£ç : 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788- (void)appendUrls:(NSArray&lt;NSString *&gt;*)urls&#123; if (urls.count &gt; 0) &#123; WeakSelf; dispatch_async(dispatch_get_main_queue(), ^&#123; [self.collectionView performBatchUpdates:^&#123; NSMutableArray&lt;NSIndexPath*&gt;* idxs = [NSMutableArray array]; for (int i = 0; i &lt; urls.count; i ++) &#123; NSIndexPath* idx = [NSIndexPath indexPathForItem:weakSelf.urls.count + i inSection:0]; [idxs addObject:idx]; &#125; [weakSelf.urls addObjectsFromArray:urls]; [weakSelf.collectionView insertItemsAtIndexPaths:idxs]; &#125; completion: NULL]; &#125;); &#125;&#125;- (void)viewDidLayoutSubviews&#123; [super viewDidLayoutSubviews]; self.collectionView.frame = self.view.bounds;&#125;- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return self.urls.count;&#125;- (__kindof UICollectionViewCell*)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; CollectionViewCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:CollectionViewCellID forIndexPath:indexPath]; cell.url = self.urls[indexPath.row]; return cell;&#125;- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section&#123; return 0.5;&#125;- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section&#123; return 0.01;&#125;- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout insetForSectionAtIndex:(NSInteger)section&#123; return UIEdgeInsetsZero;&#125;- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewFlowLayout* layout = (UICollectionViewFlowLayout*)collectionViewLayout; CGFloat w = (CGRectGetWidth(collectionView.frame) - layout.minimumInteritemSpacing - layout.sectionInset.left - layout.sectionInset.right) / 8 - 0.5; return CGSizeMake(w, w);&#125;- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath&#123; DetailController* detail = [[DetailController alloc] init]; detail.url = self.urls[indexPath.row]; [self.navigationController pushViewController:detail animated:YES];&#125;- (UICollectionView *)collectionView&#123; if (!_collectionView) &#123; UICollectionViewFlowLayout* layout = [[UICollectionViewFlowLayout alloc] init]; layout.minimumLineSpacing = 0.5; layout.minimumInteritemSpacing = 0; layout.sectionInset = UIEdgeInsetsZero; _collectionView = [[UICollectionView alloc] initWithFrame:CGRectZero collectionViewLayout:layout]; _collectionView.delegate = self; _collectionView.dataSource = self; [_collectionView registerClass:[CollectionViewCell class] forCellWithReuseIdentifier:CollectionViewCellID]; _collectionView.backgroundColor = [UIColor whiteColor]; &#125; return _collectionView;&#125; è‡³æ­¤ï¼Œæˆ‘ä»¬å°±ç®—å®Œæˆäº†æˆ‘ä»¬çš„ç›®æ ‡;çœ‹åˆ°ç¨‹åºä¸åœçš„æœ‰å›¾ç‰‡åŠ è½½å‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹å°å…´å¥‹å‘¢ã€‚ðŸ˜„çŽ°åœ¨æˆ‘ä»¬å†™çš„ç¨‹åºä¼šæ— é™å¾ªçŽ¯çš„çˆ¬å–ï¼Œä½†æ˜¯æ€Žä¹ˆèƒ½æŽ§åˆ¶çˆ¬å–æ·±åº¦å‘¢ï¼Ÿ æŽ§åˆ¶æ·±åº¦æˆ‘çš„åšæ³•æ˜¯ç»™urlåˆ›å»ºä¸€ä¸ªåˆ†ç±»ï¼Œæ·»åŠ ä¸€ä¸ªå±žæ€§depthè¡¨ç¤ºæ­¤urlçš„æ·±åº¦å€¼,åˆå§‹çš„urlæ·±åº¦ä¸º0,åœ¨æ­¤é¡µé¢ä¸Šçˆ¬å–çš„urlæ·±åº¦ä¸º1ï¼Œè¿™æ ·ä»¥æ­¤ç±»æŽ¨ï¼Œç›´åˆ°æˆ‘ä»¬æŒ‡å®šæ·±åº¦åœæ­¢ä¸ºæ­¢ã€‚ NSURL+depth.h 12345@interface NSURL (depth)@property (nonatomic, assign) NSUInteger depth;@end NSURL+depth.m 1234567891011121314151617#import "NSURL+depth.h"#import &lt;objc/runtime.h&gt;static const void * depth_key = "depth_key";@implementation NSURL (depth)@dynamic depth;- (NSUInteger)depth&#123; return [objc_getAssociatedObject(self, depth_key) unsignedIntegerValue];&#125;- (void)setDepth:(NSUInteger)depth&#123; objc_setAssociatedObject(self, depth_key, @(depth), OBJC_ASSOCIATION_ASSIGN);&#125;@end ç„¶åŽåœ¨æˆ‘ä»¬çš„ startæ–¹æ³•é‡Œé¢ç»™ç¬¬ä¸€ä¸ªurlçš„æ·±åº¦èµ‹å€¼: 123456- (void)start&#123; NSURL* url = [NSURL URLWithString:self.option.website]; url.depth = 0; [self loadUrl:url];&#125; åœ¨sessionå›žè°ƒçš„æ–¹æ³•é‡Œé¢æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸‹æ­¤urlçš„æ·±åº¦æ˜¯å¦éœ€è¦ç»§ç»­çˆ¬å–: 12345678910111213- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; NSString* html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; NSUInteger depth = dataTask.originalRequest.URL.depth; if (html &amp;&amp; html.length &gt; 0) &#123; if (depth &lt; self.option.maxDepth) &#123; [self fetchUrlWithHtml:html depth:depth + 1]; &#125; [self fetchImgWithHtml:html]; &#125;&#125; ç„¶åŽæ”¹ä¸‹fetchUrlWithHtmlæ–¹æ³•ï¼Œç»™ä¸‹ä¸ªurlèµ‹å€¼æ·±åº¦: 12345678910111213141516171819202122232425262728- (void)fetchUrlWithHtml:(NSString*)html depth:(NSUInteger)depth&#123; WeakSelf; [self.fetchHtmlQueue addOperationWithBlock:^&#123; StrongSelf; NSArray&lt;NSString*&gt;* strings = [sSelf fetchStringsWithHtml:html expression:sSelf-&gt;_urlExpression]; for (NSString* string in strings) &#123; NSURL* url = [NSURL URLWithString:string]; if ([sSelf-&gt;_finashUrl containsObject:string]) &#123; continue; &#125; url.depth = depth; [sSelf-&gt;_finashUrl addObject:string]; [sSelf loadUrl:url]; &#125; &#125;];&#125;``` æœ€åŽå¿˜è¯´äº†ä¸€ä¸ªåœ°æ–¹,é‚£å°±æ˜¯`SpiderOption`,ç»™è¿™ä¸ªç±»æ·»åŠ ä¸€ä¸ªæœ€å¤§æ·±åº¦çš„å±žæ€§,è®©å¤–ç•Œæ¥æŽ§åˆ¶: ```objc /** æœ€å¤§æŠ“å–æ·±åº¦ é»˜è®¤ NSUIntegerMax */@property (nonatomic, assign) NSUInteger maxDepth; ok,åœ¨æŽ§åˆ¶å™¨é‡Œé¢ç»™å®šæœ€å¤§çš„æ·±åº¦,æœ€å¥½ä¸è¦å¤ªå¤§,è¿è¡Œä¸€ä¸‹å§ï¼ï¼ï¼ ç›¸å…³é“¾æŽ¥: é¡¹ç›®æºç  ç”¨Objective-Cå†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«(ä¸€)]]></content>
  </entry>
  <entry>
    <title><![CDATA[ç”¨Objective-Cå†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2017%2F%E7%94%A8Objective-C%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä½ æ˜¯ä¸æ˜¯æƒ³å†™ä¸ªçˆ¬è™«æ¥æŠ“å–ç‚¹ä¸œè¥¿,ä½†æ˜¯ä½ åˆä¸ä¼šPythonæˆ–è€…åˆ«çš„è¯­è¨€ï¼Œé‚£ä¹ˆä½ å°±å¾—æ„Ÿè°¢ä½ è‡ªå·±èƒ½æ¥åˆ°è¿™é‡Œã€‚æŽ¥ä¸‹æ¥å°±äº¤ç»™ä½ å¦‚ä½•ç”¨Objective-Cå†™ä¸€ä¸ªçˆ¬è™«ã€‚ ä»€ä¹ˆï¼ŸObjective-Cä¹Ÿèƒ½å†™çˆ¬è™«ï¼Ÿä¸éƒ½æ˜¯Pythonæ‰å¯ä»¥çš„ä¹ˆï¼Ÿé‚£ä¹ˆæˆ‘å‘Šè¯‰ä½ åŸºæœ¬ä¸Šå¤§éƒ¨åˆ†è¯­è¨€éƒ½æ˜¯å¯ä»¥å†™çˆ¬è™«çš„ï¼Œåªæ˜¯Pythonç”¨æ¥å†™çˆ¬è™«æ¯”è¾ƒæ–¹ä¾¿ï¼Œä»–æœ‰æµ·é‡çš„ä¸‰æ–¹åº“å¯ä»¥è®©å¼€å‘è€…è°ƒç”¨è€Œå·²ã€‚è€Œåˆ«çš„è¯­è¨€åŸºæœ¬ä¸Šå°±æ˜¯é è‡ªå·±è‹¦é€¼çš„æ’¸äº†ã€‚ é‚£ä¹ˆç”¨Objective-Cå†™çˆ¬è™«æœ‰ä»€ä¹ˆç”¨ï¼Ÿé iPhoneæ¥çˆ¬æ•°æ®ä¹ˆï¼Ÿè¿™é‡Œåšä¸»åªæ˜¯å†™ä¸ªç®€å•çš„çˆ¬è™«è€Œå·²ï¼Œå¹¶ä¸æŒ‡æœ›ç”¨æ­¤æ¥ä¸“é—¨æŠ“å–æ•°æ®ï¼Œä½ è§‰å¾—è®©æ‰‹æœºåŽ»çˆ¬æ•°æ®èƒ½çˆ¬å¤šå°‘å•Šã€‚æœ¬æ•™ç¨‹ä¼šå…¼å®¹Macè½¯ä»¶å¼€å‘ï¼Œä½ å¯ä»¥ç”¨æ­¤æŠ€æœ¯å¼€å‘macçˆ¬è™«å·¥å…·ã€‚ åºŸè¯å°‘è¯´ï¼Œè®©æˆ‘ä»¬æ¥å¼€å§‹å§ï¼ å¿…å¤‡å·¥å…· é“¾æŽ¥ç½‘ç»œçš„Mac, æµè§ˆå™¨ï¼ŒæŽ¨èç”¨Google Chrome Xcodeå¼€å‘å·¥å…· å¿…å¤‡æŠ€èƒ½ ç†Ÿæ‚‰Objective-C èƒ½é˜…è¯»HTML,èƒ½è®¤è¯†åŸºæœ¬çš„æ ‡ç­¾å³å¯ æ­£åˆ™è¡¨è¾¾å¼,å¤§æ¦‚æµè§ˆä¸€ä¸‹å°±è¡Œ,è¿™é‡Œåœ¨é‡åˆ°çš„æ—¶å€™åšä¸»ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ æœ¬ç¯‡ç›®æ ‡ æŠ“å–å›žè½¦æ¡Œé¢ä¸Šçš„å›¾ç‰‡ é™„å›¾: åˆ†æžç½‘é¡µç”¨æµè§ˆå™¨æ‰“å¼€å›žè½¦æ¡Œé¢,å¹¶ä¸”æŒ‰ä¸‹ option + command + iæ‰“å¼€å¼€å‘è€…å·¥å…·ã€‚å¦‚å›¾: ç¡®ä¿å³ä¸Šæ–¹æ˜¯é€‰ä¸­çš„Elementsé€‰é¡¹ï¼Œä¸‹é¢HTMLå°±æ˜¯ç½‘é¡µçš„æºä»£ç ã€‚é¼ æ ‡åœ¨HTMLä¸Šé¢ç§»åŠ¨çš„æ—¶å€™å·¦ä¾§é¡µé¢ä¼šæœ‰ç›¸åº”çš„æ¨¡å—æç¤ºï¼Œæˆ‘ä»¬ä»¥æ¬¡ç‚¹å¼€æ ‡ç­¾ï¼Œå°±èƒ½æ‰¾åˆ°æƒ³è¦çš„å›¾ç‰‡åœ°å€: å¦‚å›¾: ç²˜ä¸€æ®µä»£ç : 123456&lt;img a_width="576" a_height="360" src="https://up.enterdesk.com/edpic_360_360/cf/e1/8f/cfe18f5a7e0a42355784bb992f313853.jpg" alt="æ¸…æ˜ŽèŠ‚æ°”" title="æ¸…æ˜ŽèŠ‚æ°”" style="height: 185px; width: 296px;"&gt; ä¸Šæ®µä»£ç ä¸­srcå°±æ˜¯ç½‘é¡µä¸­çš„å›¾ç‰‡åœ°å€ï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥å°±æ˜¯æŠŠè¿™ä¸ªsrcçš„å€¼æå–å‡ºæ¥ã€‚ ç¼–ç ä¸Šé¢æˆ‘ä»¬åˆ†æžäº†ç½‘é¡µæºç ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¤§è‡´æµç¨‹ï¼š èŽ·å–ç½‘é¡µæºç  æ­£åˆ™æå–url å¥½! è®©æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªObjective-Cé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦æ˜¯æ¥ä»‹ç»å¦‚ä½•å†™çˆ¬è™«ï¼Œè‡³äºŽObjective-Cé¡¹ç›®è‡ªå·±åˆ›å»ºå³å¯ã€‚ åˆå§‹åŒ–åšä¸»è¿™é‡Œåœ¨ä¸»æŽ§åˆ¶å™¨ä¸Šé¢æ·»åŠ ä¸€ä¸ªUITextViewï¼ŒèƒŒæ™¯è‰²ä¸ºé»‘è‰²ï¼›Tint é¢œè‰²ä¸ºç»¿è‰²ï¼Œ(è¿™æ ·çš„é¢œè‰²çœ‹èµ·æ¥æ¯”è¾ƒé«˜å¤§ä¸Šä¸€ç‚¹)ï¼›ä¸å¯ç¼–è¾‘ï¼›æ‰“å¼€è¶…è¿žæŽ¥åŠŸèƒ½ï¼›å¹¶ä¸”è¿žæŽ¥åˆ°æ‰€åœ¨çš„æŽ§åˆ¶å™¨ã€‚å¦‚å›¾: åˆ›å»ºå·¥å…·ç±»åˆ›å»ºSpiderç±»å’ŒSpiderOptionç±»ã€‚Spideræ˜¯çˆ¬è™«å·¥å…·ç±»;SpiderOptionæ˜¯å‚æ•°ç±»ï¼Œåœ¨çˆ¬æ•°æ®è¿‡ç¨‹ä¸­æ‰€éœ€è¦çš„å‚æ•°éƒ½ç”±SpiderOptionä¼ é€’ç»™Spider SpiderOption.h 12345678910111213141516171819202122#import &lt;Foundation/Foundation.h&gt;typedef void(^SpiderCompleteHander)(NSString* url);@interface SpiderOption : NSObject/** ç›®æ ‡ç½‘ç«™ */@property (nonatomic, copy) NSString* website;/** æŠ“å–æ•°æ®æ­£åˆ™è¡¨è¾¾å¼ */@property (nonatomic, copy) NSString* pattern;/** UrlæŠ“å–å®Œæˆå›žè°ƒ */@property (nonatomic, copy) SpiderCompleteHander progress;@end Spider.h 123456789101112131415161718192021222324#import &lt;Foundation/Foundation.h&gt;#import "SpiderOption.h"@interface Spider : NSObject/** å‚æ•°ç±» */@property (nonatomic, strong, readonly) SpiderOption* option;/** åˆå§‹åŒ–æ–¹æ³• @param option å‚æ•°ç±» @return self */- (instancetype)initWithOption:(SpiderOption*)option;/** å¼€å§‹æŠ“å– */- (void)start;@end Spider.m 1234567891011121314151617#import "Spider.h"@implementation Spider- (instancetype)initWithOption:(SpiderOption *)option&#123; self = [super init]; if (self) &#123; _option = option; &#125; return self;&#125;- (void)start&#123;&#125;@end æµ‹è¯•å·¥å…·ç±»ç»è¿‡ç¬¬äºŒæ­¥ä¹‹åŽï¼Œåˆæ­¥çš„çˆ¬è™«å·¥å…·å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨ViewController.mé‡Œé¢è°ƒç”¨æˆ‘ä»¬çš„çˆ¬è™«å·¥å…·ã€‚ ViewController.m 123456789101112131415161718192021222324252627282930313233343536373839404142#import "ViewController.h"#import "Spider.h"@interface ViewController ()@property (weak, nonatomic) IBOutlet UITextView *textView;@property (strong, nonatomic) Spider *spider;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆå§‹åŒ–ä¸€ä¸ªå‚æ•°ç±» SpiderOption* option = [[SpiderOption alloc] init]; //å‡†å¤‡ç›®æ ‡ç½‘å€ option.website = @"https://www.enterdesk.com"; //å¤„ç†å›žè°ƒï¼Œå½“æˆåŠŸæŠ“å–ä¸€ä¸ªå†…å®¹ä¹‹åŽï¼Œæˆ‘ä»¬å°±æŠŠä»–æ‹¼æŽ¥åˆ°textViewçš„åº•éƒ¨ option.complete = ^(NSString *url) &#123; [self showLogs:url]; &#125;; //åˆå§‹åŒ–çˆ¬è™«ç±» self.spider = [[Spider alloc] initWithOption:option]; //å¼€å§‹æŠ“å– [self.spider start];&#125;- (void)showLogs:(NSString*)log&#123; //æŠŠLogå†…å®¹æ‹¼æŽ¥åˆ°textViewæœ€ä¸‹é¢ï¼Œå¹¶ä¸”æ»šåŠ¨åˆ°æœ€ä¸‹é¢ if (log.length &gt; 0) &#123; [self.textView insertText:[NSString stringWithFormat:@"%@\n\n",log]]; [self.textView scrollRangeToVisible:NSMakeRange(self.textView.text.length, 0)]; &#125;&#125;@end çŽ°åœ¨æ¥è¿è¡Œä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®ï¼Œè™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¼€å§‹çˆ¬ä»€ä¹ˆæ•°æ®ï¼ŒæŽ¥ä¸‹è®©æˆ‘ä»¬æ¥å®Œå–„æˆ‘ä»¬çš„Spiderå·¥å…·ç±»ã€‚ å®Œå–„å·¥å…·ç±»åœ¨æˆ‘ä»¬çš„Spider.mé‡Œé¢æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥èŽ·å–ç½‘é¡µçš„HTMLæºç ï¼š 12345678910111213141516171819- (void)loadUrl:(NSString*)urlString&#123; WeakSelf; urlString = [urlString stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]]; NSURL* url = [NSURL URLWithString:urlString]; NSURLSessionConfiguration* configuration = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession* session = [NSURLSession sessionWithConfiguration:configuration]; NSURLSessionDataTask* task = [session dataTaskWithURL:url completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; if (!error) &#123; NSString* html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; NSLog(@"%@",html); &#125; &#125;]; [task resume];&#125; æŽ¥ä¸‹æ¥åœ¨æˆ‘ä»¬çš„startæ–¹æ³•è°ƒç”¨ä¸Šè¿°æ–¹æ³•: 123- (void)start&#123; [self loadUrl:self.option.website];&#125; è®©æˆ‘ä»¬åœ¨è¿è¡Œä¸€æ¬¡é¡¹ç›®ï¼Œå¦‚æžœç½‘ç»œæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æŽ§åˆ¶å™¨ä¸Šé¢è¾“å‡ºçš„HTMLæºç ,å°½ç®¡æˆ‘ä»¬çš„textViewè¿˜æ˜¯é»‘é»‘çš„ä¸€ç‰‡ã€‚å¦‚ä¸‹å›¾: æ­£åˆ™åŒ¹é…æˆ‘ä»¬å†æ¬¡ç»™Spider.mæ·»åŠ ä¸€ä¸ªæ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¸»è¦å°±æ˜¯ä»ŽHTMLé‡Œé¢æå–å‡ºæˆ‘ä»¬æƒ³è¦çš„å†…å®¹ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„å›¾ç‰‡,ç„¶åŽå›žè°ƒç»™æŽ§åˆ¶å™¨: 123456789101112131415161718192021- (void)matchesStringInHtml:(NSString*)html&#123; WeakSelf; NSRegularExpression* expression = [NSRegularExpression regularExpressionWithPattern:self.option.pattern options:NSRegularExpressionCaseInsensitive error:nil]; NSArray&lt;NSTextCheckingResult*&gt;* results = [expression matchesInString:html options:NSMatchingReportCompletion range:NSMakeRange(0, html.length)]; NSMutableArray&lt;NSString*&gt;* strings = [NSMutableArray arrayWithCapacity:results.count]; for (NSTextCheckingResult* result in results) &#123; NSString* sub = [html substringWithRange:result.range]; [strings addObject:sub]; &#125; weakSelf.option.progress ? weakSelf.option.progress(strings) : nil;&#125; æ–¹æ³•å†™å¥½äº†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨loadUrlçš„completionHandlerè°ƒç”¨ä¸€ä¸‹. 123456789 Â·Â·Â· NSString* html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; if (!error &amp;&amp; html.length &gt; 0) &#123; [sSelf fetchImgWithHtml:html]; &#125;else&#123; NSLog(@"åŠ è½½å‡ºé”™:%@",error); &#125; Â·Â·Â· è¿˜éœ€è¦ç»™SpiderOptionçš„patternèµ‹å€¼ï¼Œé‚£æˆ‘ä»¬åœ¨ViewController.mé‡Œé¢æ·»åŠ ä»¥ä¸‹æ­£åˆ™å³å¯ï¼š 123456...option.website = @"https://www.enterdesk.com";option.pattern = @"(?&lt;=(src=\"))https?://.+?.(jpg|png)";... æœ€åŽï¼Œè®©æˆ‘ä»¬è¿è¡Œä»¥ä¸‹çœ‹æ•ˆæžœå§,æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘€ï¼ï¼ï¼ å¤‡æ³¨æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹æ­£åˆ™(?&lt;=(src=\&quot;))https?://.+?.(jpg|png)è¡¨è¾¾å¼çš„å«ä¹‰: HTMLä¸­çš„å›¾ç‰‡åœ°å€å¯èƒ½ç±»ä¼¼äºŽhttp://aaa.jpgã€åˆæˆ–è€…æ˜¯ä»¥httpså¼€å¤´çš„https://aaa.jpg,é‚£æˆ‘ä»¬å°±ç”¨https?://aaa.jpgå³å¯åŒ¹é…httpä¹Ÿå¯åŒ¹é…httpsã€‚?åœ¨è¿™é‡Œè¡¨ç¤ºå‰ä¸€ä¸ªå­—ç¬¦sæœ‰0ä¸ªæˆ–è€…1ä¸ªã€‚ æˆ–è®¸ç½‘é¡µä¸­çš„å›¾ç‰‡ä¸ä»…ä»…æ˜¯.jpgåˆæˆ–è€…æ˜¯.pngã€.gifç­‰ç­‰ï¼Œæˆ‘ä»¬ç”¨æˆ–|æå–æˆ‘ä»¬æƒ³è¦çš„æ ¼å¼å›¾ç‰‡ã€‚æ¯”å¦‚.(jpg|png)å°±æ˜¯æˆ‘ä»¬æƒ³å–jpgæˆ–è€…æ˜¯pngçš„å›¾ç‰‡,å¦‚æžœä½ ä¹Ÿæƒ³æå–.gifçš„å›¾ç‰‡ï¼Œå¯ä»¥è¿™æ ·å†™.(jpg|png|gif)å³å¯ã€‚ æˆ‘ä»¬å†è¯´è¯´ä¸­é—´çš„.+?,.ä»£è¡¨å•ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼è¿™æ ·å†™http://..jpgæˆ‘ä»¬åªèƒ½æå–http://a.jpgè¿™ä¸­é—´åªæœ‰å•ä¸ªå­—ç¬¦çš„urlã€‚é‚£å¦‚æžœæˆ‘ä»¬æƒ³æå–ä¸­é—´ä¸ªæ•°ä¸ç¡®å®šçš„å‘¢ï¼Ÿæ¯”å¦‚http://abc.jpg?æˆ‘ä»¬å°±åœ¨.åŽé¢åŠ ä¸ª+å³å¯ï¼›+è¡¨ç¤ºå¤§äºŽç­‰äºŽ1ä¸ªï¼Œæ¯”å¦‚http://.+.jpgæˆ‘ä»¬æ—¢å¯ä»¥åŒ¹é…åˆ°http://a.jpgä¹Ÿå¯åŒ¹é…åˆ°http://aaa.jpgç­‰ä¸­é—´å¤šä¸ªå­—ç¬¦çš„urlã€‚ é‚£ä¹ˆåŽé¢çš„?å‘¢,è¿™é‡Œçš„?å¤šä»£è¡¨çš„æ˜¯éžè´ªå©ªåŒ¹é…ï¼Œä¸¾ä¸ªä¾‹å­:http://aa.jpg.jpgåƒè¿™ç§urlæˆ‘ä»¬è¯¥æ€Žä¹ˆæå–å‘¢ï¼Œå¦‚æžœæŒ‰ç…§åˆšæ‰http://.+.jpgçš„è¡¨è¾¾å¼åŒ¹é…å‡ºæ¥çš„æ˜¯http://aa.jpg.jpgæ•´ä¸ªä¸²ï¼Œä½†æ˜¯æˆ‘ä»¬åªæƒ³æå–åˆ°http://aa.jpgæ€Žä¹ˆåŠžï¼Œæˆ‘ä»¬å°±åœ¨+åŽé¢åŠ ä¸ª?ä»£è¡¨å°½å¯èƒ½å°‘çš„åŒ¹é…ï¼Œå°±æ˜¯æ‰€è°“çš„éžè´ªå©ªåŒ¹é…ã€‚ æœ€åŽåœ¨è¯´ä¸€ä¸‹(?&lt;=(src=\&quot;))è¿™ä¸ªæ„æ€å°±æ˜¯æˆ‘ä»¬è¦æå–src=&quot;åŽé¢çš„http:xx.jpgçš„å›¾ç‰‡ï¼Œä½†æ˜¯ä¸åŒ…å«src=&quot;ã€‚ä¸¾ä¸ªðŸŒ°:å¦‚æžœæŠŠè¿™ä¸ªè¡¨è¾¾å¼åŽ»æŽ‰ï¼Œæˆ‘ä»¬ä¼šå‘çŽ°æå–åˆ°çš„urlæœ‰å¯èƒ½æ˜¯è¿™æ ·https://www.enterdesk.com/bizhi/5488.html\&quot;&gt;&lt;img src=\&quot;https://up.enterdesk.com/edpic_360_360/34/3f/f4/343ff4ada1548da0a81388f86dd9d1af.jpgï¼Œå¾ˆæ˜¾ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æžœã€‚æ‰€ä»¥è¯´è¿™ä¸ªå°±æ˜¯èµ·åˆ°äº†ç›¸åº”çš„ä½œç”¨ã€‚ ç›¸å…³é“¾æŽ¥: é¡¹ç›®æºç  ç”¨Objective-Cå†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«(äºŒ)]]></content>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢]]></title>
    <url>%2F2017%2F%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[æ˜¥æ±ŸèŠ±æœˆå¤œ ã€ä½œè€…ã€‘å¼ è‹¥è™š ã€æœä»£ã€‘å” è¯‘æ–‡å¯¹ç…§ æ˜¥æ±Ÿæ½®æ°´è¿žæµ·å¹³ï¼Œæµ·ä¸Šæ˜Žæœˆå…±æ½®ç”Ÿã€‚æ»Ÿæ»Ÿéšæ³¢åƒä¸‡é‡Œï¼Œä½•å¤„æ˜¥æ±Ÿæ— æœˆæ˜Žï¼ æ±Ÿæµå®›è½¬ç»•èŠ³ç”¸ï¼Œæœˆç…§èŠ±æž—çš†ä¼¼éœ°ï¼›ç©ºé‡Œæµéœœä¸è§‰é£žï¼Œæ±€ä¸Šç™½æ²™çœ‹ä¸è§ã€‚ æ±Ÿå¤©ä¸€è‰²æ— çº¤å°˜ï¼ŒçšŽçšŽç©ºä¸­å­¤æœˆè½®ã€‚æ±Ÿç•”ä½•äººåˆè§æœˆï¼Ÿæ±Ÿæœˆä½•å¹´åˆç…§äººï¼Ÿ äººç”Ÿä»£ä»£æ— ç©·å·²ï¼Œæ±Ÿæœˆå¹´å¹´åªç›¸ä¼¼ã€‚ä¸çŸ¥æ±Ÿæœˆå¾…ä½•äººï¼Œä½†è§é•¿æ±Ÿé€æµæ°´ã€‚ ç™½äº‘ä¸€ç‰‡åŽ»æ‚ æ‚ ï¼Œé’æž«æµ¦ä¸Šä¸èƒœæ„ã€‚è°å®¶ä»Šå¤œæ‰èˆŸå­ï¼Ÿä½•å¤„ç›¸æ€æ˜Žæœˆæ¥¼ï¼Ÿ å¯æ€œæ¥¼ä¸Šæœˆå¾˜å¾Šï¼Œåº”ç…§ç¦»äººå¦†é•œå°ã€‚çŽ‰æˆ·å¸˜ä¸­å·ä¸åŽ»ï¼Œæ£è¡£ç §ä¸Šæ‹‚è¿˜æ¥ã€‚ æ­¤æ—¶ç›¸æœ›ä¸ç›¸é—»ï¼Œæ„¿é€æœˆåŽæµç…§å›ã€‚é¸¿é›é•¿é£žå…‰ä¸åº¦ï¼Œé±¼é¾™æ½œè·ƒæ°´æˆæ–‡ã€‚ æ˜¨å¤œé—²æ½­æ¢¦è½èŠ±ï¼Œå¯æ€œæ˜¥åŠä¸è¿˜å®¶ã€‚æ±Ÿæ°´æµæ˜¥åŽ»æ¬²å°½ï¼Œæ±Ÿæ½­è½æœˆå¤è¥¿æ–œã€‚ æ–œæœˆæ²‰æ²‰è—æµ·é›¾ï¼Œç¢£çŸ³æ½‡æ¹˜æ— é™è·¯ã€‚ä¸çŸ¥ä¹˜æœˆå‡ äººå½’ï¼Œè½æœˆæ‘‡æƒ…æ»¡æ±Ÿæ ‘ã€‚ 12345@interface Dog- (void)viewDidLoad()&#123; NSLog(@"Hello world");&#125;@end 12345class Dog&#123; public static void main(String[] args)&#123; System.out.println("Hello world"); &#125;&#125; ä»…æ­¤çºªå¿µéƒ¨ç½²çš„ç¬¬ä¸€ä¸ªåšå®¢ï¼Œ ç‰¹åˆ«æ„Ÿè°¢:Devin_ tag { color:#999999 } author { font-size:14px }]]></content>
  </entry>
</search>
